(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d23014d"],{eb82:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("GenericCreateUpdatePage",e._b({on:{getObjectDone:e.afterGetUser}},"GenericCreateUpdatePage",e.$data,!1))},u=[],o=(r("1c01"),r("58b2"),r("8e6e"),r("f3e2"),r("d25f"),r("ac6a"),r("456d"),r("57e7"),r("bd86")),a=r("cd4a"),n=r("2c41"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-checkbox-group",e._g(e._b({model:{value:e.iValue,callback:function(t){e.iValue=t},expression:"iValue"}},"el-checkbox-group",e.$attrs,!1),e.$listeners),e._l(e.group,(function(t){return r("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)},l=[],c=r("0692"),p={name:"RoleCheckbox",components:{},props:{value:{type:[Array,Object],default:function(){return[]}},group:{type:[Array,Object],default:function(){return[{label:c["a"].t("users.OrgAdmin"),value:"Admin"},{label:c["a"].t("users.OrgAuditor"),value:"Auditor"},{label:c["a"].t("users.OrgUser"),value:"User"}]}}},data:function(){return{iValue:this.value}}},d=p,b=r("2877"),h=Object(b["a"])(d,i,l,!1,null,"31086140",null),f=h.exports,g=r("7541"),_=r("2f62");function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){Object(o["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O={components:{GenericCreateUpdatePage:a["d"]},data:function(){var e=this;return{initial:{},user:{can_public_key_auth:!1},fields:[[this.$t("users.Account"),["name","username","email","groups"]],[this.$t("users.Authentication"),["password_strategy","update_password","password","need_update_password","set_public_key","public_key","mfa_level","source"]],[this.$t("users.Secure"),["role","org_roles","date_expired"]],[this.$t("common.Other"),["phone","wechat","comment"]]],url:"/api/v1/users/users/",fieldsMeta:{password_strategy:{hidden:function(t){return e.$route.params.id||"local"!==t.source}},email:{rules:[g["c"].EmailCheck,g["c"].Required]},update_password:{label:this.$t("users.UpdatePassword"),type:"checkbox",hidden:function(t){return!!t.update_password||("update"!==e.$route.meta.action||"local"!==t.source)}},password:{component:n["a"],hidden:function(e){return"custom"!==e.password_strategy&&!e.update_password},el:{required:!1,userIsOrgAdmin:!1}},need_update_password:{label:"",type:"checkbox-group",el:{style:"margin-top: -20px;margin-bottom: -10px"},options:[{label:!0,value:this.$t("users.needUpdatePasswordNextLogin")}],hidden:function(t){return"custom"!==t.password_strategy&&(!t.update_password||!e.user.can_public_key_auth)}},set_public_key:{label:this.$t("users.SetPublicKey"),type:"checkbox",hidden:function(t){return!!t.set_public_key||"update"!==e.$route.meta.action}},public_key:{type:"input",el:{type:"textarea"},hidden:function(e){return!e.set_public_key}},role:{label:this.$t("users.SuperRole"),hidden:function(){return!e.$store.getters.currentUserIsSuperAdmin}},org_roles:{rules:[g["c"].RequiredChange],label:this.$t("users.OrgRole"),component:f,hidden:function(){return!e.$store.getters.hasValidLicense},el:{disabled:this.$store.getters.currentOrgIsRoot,rule:[]},helpText:this.$t("users.HelpText.OrgRoleHelpText")},groups:{el:{multiple:!0,ajax:{url:"/api/v1/users/groups/"},value:[]}}},submitMethod:function(){var e=this.$route.params;return e.id?"put":"post"},cleanFormValue:function(e){var t=this.submitMethod();return"post"===t&&"email"===e.password_strategy&&(delete e["password"],this.currentOrgIsRoot&&delete e["groups"]),void 0!==e.update_password&&delete e.update_password,e}}},computed:y({},Object(_["b"])(["currentOrgIsRoot"])),mounted:function(){this.currentOrgIsRoot&&(this.fieldsMeta.groups.el.disabled=!0)},methods:{afterGetUser:function(e){this.user=e,this.fieldsMeta.password.el.userIsOrgAdmin="Admin"===e.role||-1!==e.org_roles.indexOf("Admin"),this.$route.query.clone_from&&(this.user.groups=[])}}},w=O,v=Object(b["a"])(w,s,u,!1,null,"3f71cdb7",null);t["default"]=v.exports}}]);