(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b0afa8e2"],{"32b6":function(e,t,a){},"7e21":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.loading?e._e():a("GenericCreateUpdatePage",e._b({attrs:{"perform-submit":e.performSubmit,"create-success-next-route":e.createSuccessNextRoute}},"GenericCreateUpdatePage",e.$data,!1))},s=[],p=(a("2caf"),a("6d67"),a("768b")),i=(a("7f7f"),a("8ea5"),a("cd4a")),o=a("56f5"),r=a("cf45"),n=a("7541"),c={components:{GenericCreateUpdatePage:i["d"]},data:function(){var e=this,t=this,a=new Date,l=Object(r["h"])(7,a).toISOString(),s=a.toISOString(),i=[];return{hasDetailInMsg:!1,loading:!0,initial:{ips_or_not:!0,meta:{apply_date_expired:l,apply_date_start:s,apply_actions:["all","connect","updownload","upload_file","download_file"]},org_id:"",type:"apply_application"},fields:[[this.$t("common.Basic"),["title","type","org_id","comment"]],[this.$t("tickets.RequestPerm"),["meta"]]],fieldsMeta:{type:{hidden:function(){return!0},el:{disabled:!0}},meta:{fields:["apply_category_type","apply_applications","apply_system_users","apply_date_start","apply_date_expired"],fieldsMeta:{apply_date_start:{label:this.$t("common.DateStart"),type:"date-picker",el:{type:"datetime"}},apply_applications:{type:"assetSelect",component:o["a"],label:this.$t("applications.App"),el:{value:[],ajax:{url:"",transformOption:function(e){return{label:e.name,value:e.id}}}}},apply_system_users:{type:"systemUserSelect",component:o["a"],label:this.$t("assets.SystemUser"),el:{value:[],ajax:{url:"",transformOption:function(t){if("k8s"===e.$route.query.type)return{label:t.name,value:t.id};var a=t.username||"*";return{label:t.name+"("+a+")",value:t.id}}}}},apply_date_expired:{label:this.$t("common.DateEnd"),type:"date-picker",el:{type:"datetime"}},apply_category_type:{type:"cascader",label:this.$t("applications.appType"),rules:[n["b"]],el:{multiple:!1,options:[{label:this.$t("applications.applicationsCategory.db"),value:"db",children:[{label:"MySQL",value:"mysql"},{label:"Oracle",value:"oracle"},{label:"PostgreSQL",value:"postgresql"},{label:"MariaDB",value:"mariadb"}]},{label:this.$t("applications.applicationsCategory.cloud"),value:"cloud",children:[{label:"Kubernetes",value:"k8s"}]},{label:this.$t("applications.applicationsCategory.remote_app"),value:"remote_app",children:[{label:"MySQL Workbench",value:"mysql_workbench"},{label:"vSphere Client",value:"vmware_client"},{label:"Custom",value:"custom"},{label:"Chrome",value:"chrome"}]}]},on:{change:function(a,l){var s=Object(p["a"])(a,1),i=s[0];e.apply_category_type=i,l({apply_applications:[],apply_system_users:[]}),e.fieldsMeta.meta.fieldsMeta.apply_applications.el.ajax.url="/api/v1/applications/applications/suggestion/?oid=".concat(t.org_id,"&category=").concat(i[0],"&type=").concat(i[1]),e.fieldsMeta.meta.fieldsMeta.apply_system_users.el.ajax.url="remote_app"===i[0]?"/api/v1/assets/system-users/suggestion/?oid=".concat(t.org_id,"&protocol=rdp"):"/api/v1/assets/system-users/suggestion/?oid=".concat(t.org_id,"&protocol=").concat(i[1])}}}}},org_id:{component:o["a"],el:{multiple:!1,options:this.$store.state.users.profile.user_all_orgs.map((function(e){return{label:e.name,value:e.id}}))},hidden:function(a){e.org_id=a["org_id"],i=e.apply_category_type,i&&(e.fieldsMeta.meta.fieldsMeta.apply_applications.el.ajax.url="/api/v1/applications/applications/suggestions/?oid=".concat(t.org_id,"&category=").concat(i[0],"&type=").concat(i[1]),e.fieldsMeta.meta.fieldsMeta.apply_system_users.el.ajax.url="remote_app"===i[0]?"/api/v1/assets/system-users/suggestions/?oid=".concat(t.org_id,"&protocol=rdp"):"/api/v1/assets/system-users/suggestions/?oid=".concat(t.org_id,"&protocol=").concat(i[1]))}}},url:"/api/v1/tickets/tickets/?type=apply_application&action=open",createSuccessNextRoute:{name:"TicketList"},cleanFormValue:function(e){var t=e.meta.apply_applications,a=e.meta.apply_system_users;return t&&Array.isArray(t)&&t.length<1&&delete e.meta.apply_applications,a&&Array.isArray(a)&&a.length<1&&delete e.meta.apply_system_users,e}}},mounted:function(){this.$store.state.users.profile.user_all_orgs.length>0&&(this.initial.org_id=this.$store.state.users.profile.user_all_orgs[0].id),this.loading=!1},methods:{performSubmit:function(e){var t=e.meta.apply_category_type;return e.meta.apply_category=t&&t.length>0?t[0]:"",e.meta.apply_type=t&&t.length>0?t[1]:"",delete e.meta["apply_category_type"],this.$axios["post"]("/api/v1/tickets/tickets/open/?type=apply_application",e)}}},u=c,d=(a("a6f1"),a("2877")),y=Object(d["a"])(u,l,s,!1,null,"480c6e80",null);t["default"]=y.exports},a6f1:function(e,t,a){"use strict";var l=a("32b6"),s=a.n(l);s.a}}]);