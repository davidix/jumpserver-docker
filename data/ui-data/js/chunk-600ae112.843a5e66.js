(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-600ae112"],{"0179":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("TabPage",{attrs:{"active-menu":t.config.activeMenu,submenu:t.config.submenu},on:{"update:activeMenu":function(e){return t.$set(t.config,"activeMenu",e)},"update:active-menu":function(e){return t.$set(t.config,"activeMenu",e)}},scopedSlots:t._u([{key:"badge",fn:function(e){return"AssignedTicketList"===e.tab?n("el-badge",{attrs:{value:t.getBadgeValue(e),size:"mini",type:"primary"}}):t._e()}}],null,!0)},[t._v(" "),n("keep-alive",[n(t.config.activeMenu,{tag:"component"})],1)],1)},i=[],s=(n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("d25f"),n("ac6a"),n("456d"),n("bd86")),c=n("cd4a"),a=n("2f62"),o=n("59ce"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("TicketListTable",{attrs:{url:t.url}})},l=[],p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ListTable",{attrs:{"table-config":t.ticketTableConfig,"header-actions":t.ticketActions}})},f=[],d=n("579c"),b=n("e975"),m=n("cf45"),y={name:"TicketListTable",components:{ListTable:d["a"]},props:{url:{type:String,default:"/api/v1/tickets/tickets/"},hasMoreActions:{type:Boolean,default:!1}},data:function(){var t=this,e=this.$createElement;return{ticketTableConfig:{url:this.url,columns:[{prop:"title",label:this.$t("tickets.title"),formatter:b["f"],sortable:"custom",formatterArgs:{getRoute:function(t){var e=t.row;return"apply_asset"===e.type?"AssetsTicketDetail":"apply_application"===e.type?"AppsTicketDetail":"login_asset_confirm"===e.type||"login_confirm"===e.type?"LoginAssetTicketDetail":"command_confirm"===e.type?"CommandConfirmDetail":"TicketDetail"}}},{prop:"applicant_display",label:this.$t("tickets.user"),sortable:"custom"},{prop:"type_display",label:this.$t("tickets.type"),width:"160px"},{prop:"status",label:this.$t("tickets.status"),align:"center",width:"90px",sortable:"custom",formatter:function(n){return"open"===n.status?e("el-tag",{attrs:{type:"primary",size:"mini"},style:"align-items:center; display: flex; justify-content:center;"},[" ",t.$t("tickets.OpenStatus")]):e("el-tag",{attrs:{type:"danger",size:"mini"},style:"align-items:center; display: flex; justify-content:center;"},[" ",t.$t("tickets.CloseStatus")])}},{prop:"state",label:this.$t("tickets.action"),align:"center",width:"90px",sortable:"custom",formatter:function(n){if("open"===n.status)return e("el-tag",{attrs:{type:"success",size:"mini"},style:"align-items:center; display: flex; justify-content:center;"},[" ",t.$t("tickets.Pending")]);switch(n.state){case"approved":return e("el-tag",{attrs:{type:"primary",size:"mini"},style:"align-items:center; display: flex; justify-content:center;"},[" ",t.$t("tickets.Approved")]);case"rejected":return e("el-tag",{attrs:{type:"danger",size:"mini"},style:"align-items:center; display: flex; justify-content:center;"},[" ",t.$t("tickets.Rejected")]);default:return e("el-tag",{attrs:{type:"info",size:"mini"},style:"align-items:center; display: flex; justify-content:center;"},[" ",t.$t("tickets.Closed")])}}},{prop:"date_created",label:this.$t("tickets.date"),sortable:"custom",formatter:function(t){return Object(m["p"])(t.date_created)},width:"160px"}]},ticketActions:{hasLeftActions:this.hasMoreActions,hasRightActions:!1,hasCreate:!1,hasBulkDelete:!1,searchConfig:{default:{status:{key:"status",label:this.$t("tickets.action"),value:"open",valueLabel:this.$t("tickets.Pending")}}},createTitle:this.$t("common.RequestTickets"),hasMoreActions:!1,moreCreates:{dropdown:[{name:"RequestAssetPerm",title:this.$t("tickets.RequestAssetPerm"),callback:function(){return t.$router.push({name:"RequestAssetPermTicketCreateUpdate"})}},{name:"RequestApplicationPerm",title:this.$t("tickets.RequestApplicationPerm"),callback:function(){return t.$router.push({name:"RequestApplicationPermTicketCreateUpdate"})}}]}}}},methods:{}},g=y,h=n("2877"),k=Object(h["a"])(g,p,f,!1,null,"4f6d8884",null),O=k.exports;function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach((function(e){Object(s["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var T={name:"AssignedTicketList",components:{TicketListTable:O},computed:v({url:function(){return"/api/v1/tickets/tickets/?assignees__id=".concat(this.currentUser.id)}},Object(a["b"])(["currentUser"]))},w=T,_=Object(h["a"])(w,u,l,!1,null,"4ea05d50",null),P=_.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("TicketListTable",{attrs:{url:t.url,"has-more-actions":!0}})},A=[];function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){Object(s["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var D={name:"MyTicketList",components:{TicketListTable:O},data:function(){return{}},computed:C({url:function(){return"/api/v1/tickets/tickets/?applicant=".concat(this.currentUser.id)}},Object(a["b"])(["currentUser"]))},x=D,M=Object(h["a"])(x,$,A,!1,null,"0ea708ba",null),S=M.exports,U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("GenericListTable",{ref:"GenericListTable",attrs:{"table-config":t.tableConfig,"header-actions":t.headerActions}})},E=[],R={name:"TicketFlow",components:{GenericListTable:c["g"]},data:function(){var t=this;return{tableConfig:{url:"/api/v1/tickets/flows/",columns:["type_display","created_by","date_created","date_updated","actions"],columnsShow:{min:["actions"],default:["type_display","created_by","date_created","date_updated","actions"]},columnsMeta:{type_display:{formatter:b["f"],formatterArgs:{route:"FlowDetail"}},actions:{prop:"actions",formatterArgs:{hasClone:!1,hasDelete:!1,onClone:function(e){var n=e.row;t.$router.push({name:"TicketFlowUpdate",query:{type:n.type,clone_from:n.id}})},onUpdate:function(e){var n=e.row;t.$router.push({name:"TicketFlowUpdate",params:{id:n.id}})}}}}},headerActions:{hasLeftActions:!1,hasRightActions:!1,hasSearch:!1}}}},q=R,z=Object(h["a"])(q,U,E,!1,null,null,null),F=z.exports;function B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?B(Object(n),!0).forEach((function(e){Object(s["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var I={name:"Index",components:{TabPage:c["m"],AssignedTicketList:P,MyTicketList:S,TicketFlow:F},data:function(){var t=this;return{assignedTicketCount:0,config:{activeMenu:"MyTicketList",submenu:[{title:this.$t("tickets.MyTickets"),name:"MyTicketList"},{title:this.$t("tickets.AssignedMe"),name:"AssignedTicketList"},{title:"流程设置",icon:"fa-gear",name:"TicketFlow",hidden:function(){return!(t.$store.getters.currentUserIsSuperAdmin||t.$store.getters.currentUserIsAdmin)}}]}}},computed:G({},Object(a["b"])(["currentUser"])),mounted:function(){this.getTicketOpenCount()},methods:{getTicketOpenCount:function(){var t=this;Object(o["a"])(this.currentUser.id).then((function(e){t.assignedTicketCount=e.count}))},getBadgeValue:function(t){return this.assignedTicketCount}}},J=I,V=(n("4fd5"),Object(h["a"])(J,r,i,!1,null,"42230cde",null));e["default"]=V.exports},"367c":function(t,e,n){},"4fd5":function(t,e,n){"use strict";var r=n("367c"),i=n.n(r);i.a}}]);